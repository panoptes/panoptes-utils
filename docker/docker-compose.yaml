version: '3.7'
services:
  panoptes-config-server:
    image: panoptes-config-server:latest
    build:
      context: ../
      dockerfile: ./docker/config-server.Dockerfile
    tty: true
    container_name: panoptes-config-server
    environment:
      # These need to be defined in the shell on the host.
      PANLOG:
      PANOPTES_CONFIG_HOST:
      PANOPTES_CONFIG_PORT:
      PANOPTES_CONFIG_FILE:
    restart: on-failure
    ports:
      - "${PANOPTES_CONFIG_PORT}:${PANOPTES_CONFIG_PORT}"
    volumes:
      - "${PANOPTES_CONFIG_FILE}:${PANOPTES_CONFIG_FILE}"
    command: [ "panoptes-config-server --verbose run" ]
